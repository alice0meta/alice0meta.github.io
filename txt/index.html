<!-- merge with note? -->

<!DOCTYPE html><html><head><meta charset="utf-8">
<!-- <!DOCTYPE html><html manifest="cache.manifest"><head><meta charset="utf-8"> -->
	<title>alice » txt</title>
	<link rel='shortcut icon' type='image/x-icon' href='/txt/favicon.ico'/>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<style>
		a {color: #125BCA; text-decoration: none;}
		a:hover {color: #005580; text-decoration: underline;}
		p {font-family: monospace; margin: 0;}
	</style>
	<script>
		Object.defineProperty(Array.prototype,'_',{get:function(){return _(this)}, configurable:true})
		var encode_entities = ι=> ι.replace(/[&"'<>]/g,ι=>0?0: {'&':'&amp;', '"':'&quot;', '\'':'&#39;', '<':'&lt;', '>':'&gt;'}[ι])
		var decode_entities = ι=> {var t = document.createElement('textarea'); t.innerHTML = ι; return t.value}
		var dl_pastebin = (ι,f)=> {
			var o = document.write
			document.write = ι=> {
				document.write = o
				ι = decode_entities(ι.match(/<div class="de.">.*?<\/div>/g).map(ι=> ι.match(/^<div class="de.">(.*?)<\/div>$/)[1]).join("\n"))
				f(ι) }
			var t = document.createElement('script'); t.src = "http://pastebin.com/embed_js/"+ι; document.getElementsByTagName('head')[0].appendChild(t) }
		var format = ι=> {
			var URL = /\b(?:https?:\/\/|(?:file|mailto):)(?:[^\s“”"<>]*\([^\s“”"<>]*\))?(?:[^\s“”"<>]*[^\s“”"<>)\]}⟩?!,.:;])?/g
			var parse_alicetext = ι=> _.zip(ι.split(URL).map(ι=>0?0: {type:'text', ι}), (ι.match(URL)||[]).map(ι=>0?0: {type:'url', ι}))._.flatten(true).filter(ι=> !(ι === undefined || (ι.type === 'text' && ι.ι === '')))
			return parse_alicetext(ι).map(ι=>
				ι.type==='text'? encode_entities(ι.ι) :
				ι.type==='url'? '<a target="_blank" href="'+encodeURI(ι.ι)+'">'+encode_entities(ι.ι)+'</a>':
					(()=>{throw Error()})()
				).join('') }

		var id = location.hash.replace(/^#/,'')
		dl_pastebin(id,ι=> {$('body').html(format(ι).split('\n').map(ι=> '<p style="margin-left:'+(t=ι.match(/^[  ]*/)[0].length+2)+'ch; text-indent: -'+t+'ch;">'+ι+'</p>').join(''))})
		$('title').text(id+'.txt')
	</script>
</head><body>
<p>...</p>
</body></html>
